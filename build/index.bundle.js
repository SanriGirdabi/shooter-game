(self.webpackChunkshooter_game=self.webpackChunkshooter_game||[]).push([[826],{762:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.point=0,this.playerWon=null,this.clock=0,this.backgroundMusic=null,this.musicMode=!0,this.user=null}}},689:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=()=>{const e={user:window.model.user,score:window.model.point-window.model.clock};return fetch("https://us-central1-js-capstone-backend.cloudfunctions.net/api/games/XthYmtC7N6WMKqS4zn5P/scores/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},cors:"no-cors",body:JSON.stringify(e)}).then((e=>fetch(`${e.url}`,{method:"GET",cors:"no-cors"}))).then((e=>e.json())).then((e=>e.result))}},161:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{const t=e*(Math.PI/180);return{tx:Math.cos(t),ty:Math.sin(t)}}},113:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=()=>(new Date).getTime()},17:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=()=>{window.model.clock=0}},904:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>e*(180/Math.PI)},764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=()=>{!0===window.model.musicMode?(window.model.backgroundMusic.stop(),window.model.musicMode=!1):!1===window.model.musicMode&&(window.model.backgroundMusic.play(),window.model.musicMode=!0)}},291:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=(i=s(260))&&i.__esModule?i:{default:i};class o extends a.default.GameObjects.Container{constructor(e,t,s,i,o,d,n){super(e),this.scene=e,this.x=t,this.y=s,this.button=this.scene.add.sprite(0,0,i).setInteractive(),this.text=this.scene.add.text(0,0,d,{fontSize:"32px",fill:"#fff"}),a.default.Display.Align.In.Center(this.text,this.button),this.add(this.button),this.add(this.text),this.button.on("pointerdown",(()=>{this.scene.scene.start(n)})),this.scene.add.existing(this)}}t.default=o},352:(e,t,s)=>{"use strict";var i=l(s(260)),a=l(s(314)),o=l(s(762)),d=l(s(16)),n=l(s(533)),h=l(s(122));function l(e){return e&&e.__esModule?e:{default:e}}window.onload=()=>{const e={type:i.default.AUTO,width:600,height:600,dom:{createContainer:!0},parent:"phaser-game",physics:{default:"arcade",arcade:{debug:!1}},scene:[d.default,a.default,n.default,h.default]};window.model=new o.default,window.game=new i.default.Game(e)}},16:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=d(s(260)),a=d(s(291)),o=d(s(764));function d(e){return e&&e.__esModule?e:{default:e}}class n extends i.default.Scene{constructor(){super("SceneIntro")}preload(){this.load.image("play","assets/Play.png"),this.load.audio("mainTheme","assets/mainTheme.wav"),this.load.html("nameform","assets/loginform.html")}create(){this.btnStart=new a.default(this,300,250,"play","play","","SceneMain"),this.SoundButton=this.add.text(420,50,"Toggle-Sound").setInteractive(),null===window.model.backgroundMusic&&!0===window.model.musicMode&&(window.model.backgroundMusic=this.sound.add("mainTheme",{loop:!0}),window.model.backgroundMusic.play()),this.SoundButton.on("pointerdown",(()=>(0,o.default)())),this.element=this.add.dom(300,120).createFromCache("nameform"),this.element.setPerspective(800),this.returnKey=this.input.keyboard.addKey(i.default.Input.Keyboard.KeyCodes.ENTER),this.returnKey.on("down",(()=>{const e=this.element.getChildByName("name");""!==e.value&&(window.model.user=e.value)}))}}t.default=n},122:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(s(260)),a=o(s(689));function o(e){return e&&e.__esModule?e:{default:e}}class d extends i.default.Scene{constructor(){super("SceneLeaderBoard")}create(){const e=(0,a.default)();let t=0;const s=[];(async()=>{await e.then((e=>e.forEach((e=>{s.push(e)})))),s.sort(((e,t)=>t.score-e.score)).slice(0,10).forEach((e=>{t+=40,this.add.text(30,t,`The user is ${e.user}, the score is ${e.score}!`,{fontSize:"20px",fill:"#fff"})}))})()}}t.default=d},314:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=h(s(260)),a=h(s(113)),o=h(s(161)),d=h(s(904)),n=h(s(17));function h(e){return e&&e.__esModule?e:{default:e}}class l extends i.default.Scene{constructor(){super("SceneMain")}preload(){this.load.image("background","assets/background.jpg"),this.load.image("ship","assets/player.png"),this.load.spritesheet("stars","assets/star.png",{frameWidth:24,frameHeight:22}),this.load.image("bullet","assets/bullet.png"),this.load.image("enemy","assets/eship.png"),this.load.image("enemyBullet","assets/ebullet.png"),this.load.spritesheet("explosion","assets/exp.png",{frameWidth:64,frameHeight:64}),this.load.audio("laser","assets/sndLaser.wav"),this.load.audio("explode","assets/explode.wav")}create(){(0,n.default)(),this.centerX=window.game.config.width/2,this.centerY=window.game.config.height/2,this.background=this.add.image(0,0,"background"),this.background.setOrigin(0,0),this.shield=10,this.eShield=1e3,window.model.point=0,this.ship=this.physics.add.sprite(this.centerX,this.centerY,"ship"),this.ship.scale=.65,this.enemy=this.physics.add.image(this.centerX,25,"enemy"),this.enemy.body.collideWorldBounds=!0,this.ship.body.collideWorldBounds=!0,this.physics.world.setBounds(0,0,this.background.displayWidth,this.background.displayHeight),this.background.setInteractive(),this.background.on("pointerdown",this.backgroundClicked,this),this.cameras.main.setBounds(0,0,this.background.displayWidth,this.background.displayHeight),this.cameras.main.startFollow(this.ship,!0),this.cursors=this.input.keyboard.createCursorKeys(),this.starGroup=this.physics.add.group({key:"stars",frame:[0],frameQuantity:50,bounceX:1,bounceY:1,angularVelocity:1,collideWorldBounds:!0}),this.starGroup.children.iterate((e=>{const t=Math.floor(Math.random()*this.background.displayWidth),s=Math.floor(Math.random()*this.background.displayHeight);e.x=t,e.y=s})),this.physics.add.overlap(this.ship,this.starGroup,this.collectStar,null,this),this.makeInfo();const e=this.anims.generateFrameNumbers("explosion"),t=e.slice();t.reverse();const s=t.concat(e);this.anims.create({key:"boom",frames:s,frameRate:48,repeat:!1}),this.setTimer(),this.laser=this.sound.add("laser",{loop:!1}),this.explode=this.sound.add("explode",{loop:!1})}downPlayer(){this.shield-=1,this.text1.setText(`Shields\n${this.shield}`),0===this.shield&&(window.model.playerWon=!1,this.clearTimer(),this.explode.play(),window.model.backgroundMusic.stop(),this.scene.start("SceneOver"))}downEnemy(){this.eShield-=1,this.text2.setText(`Enemy shields\n${this.eShield}`),0===this.eShield&&(this.enemy.destroy(),this.explode.play())}makeInfo(){window.clock=0,this.text1=this.add.text(50,0,"Shields\n10"),this.text2=this.add.text(300,0,"Enemy shields\n 1000"),this.text3=this.add.text(150,0,"The point\n 0"),this.text4=this.add.text(15,100,`Time: ${this.i}`),this.text1.setScrollFactor(0),this.text2.setScrollFactor(0),this.text3.setScrollFactor(0),this.text4.setScrollFactor(0)}setTimer(){this.timerVar=setInterval((()=>{this.text4.setText(`Time: ${window.model.clock+=1}`)}),1e3)}clearTimer(){clearInterval(this.timerVar)}makeBullet(){const e=(0,o.default)(this.ship.angle),t=this.physics.add.sprite(this.ship.x+30*e.tx,this.ship.y+30*e.ty,"bullet");t.angle=this.ship.angle,t.body.setVelocity(100*e.tx,100*e.ty),this.physics.add.collider(t,this.enemy,this.damageEnemy,null,this)}damageEnemy(e){this.add.sprite(e.x,e.y,"explosion").play("boom"),e.destroy(),this.downEnemy()}damagePlayer(e,t){this.add.sprite(t.x,t.y,"explosion").play("boom"),e.destroy(),this.downPlayer()}fireEnemy(){if(!(Math.abs(this.lastEbullet-(0,a.default)())<500)&&this.enemy.body){this.lastEbullet=(0,a.default)();const e=this.physics.add.sprite(this.enemy.x,this.enemy.y,"enemyBullet");e.body.angularVelocity=10,this.physics.moveTo(e,this.ship.x,this.ship.y,50),this.physics.add.collider(e,this.ship,this.damagePlayer,null,this)}}backgroundClicked(){const e=this.background.input.localX,t=this.background.input.localY;this.tx=e,this.ty=t;let s=this.physics.moveTo(this.ship,e,t,90);if(s=(0,d.default)(s),this.ship.angle=s,this.enemy.body){let e=this.physics.moveTo(this.enemy,this.ship.x,this.ship.y,70);e=(0,d.default)(e),this.enemy.angle=e}}collectStar(e,t){t.disableBody(!0,!0),window.model.point+=1,this.text3.setText(`The point\n${window.model.point}`),50===window.model.point&&(window.model.playerWon=!0,this.clearTimer(),window.model.backgroundMusic.stop(),this.scene.start("SceneOver"))}update(){const e=Math.abs(this.ship.x-this.tx),t=Math.abs(this.ship.y-this.ty);e<10&&t<10&&this.ship.body.setVelocity(0,0),this.cursors.space.isDown&&(this.makeBullet(),this.laser.play());const s=Math.abs(this.ship.x-this.enemy.x),i=Math.abs(this.ship.y-this.enemy.y);s<this.game.config.width/5&&i<this.game.config.height/5&&this.fireEnemy()}}t.default=l},533:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(s(260)),a=o(s(291));function o(e){return e&&e.__esModule?e:{default:e}}class d extends i.default.Scene{constructor(){super("SceneOver")}preload(){this.load.image("background","assets/background.jpg"),this.load.image("Re-play","assets/Play.png"),this.load.image("leaderboard","assets/leaderboard.png")}create(){this.bckimage=this.add.image(0,0,"background"),this.bckimage.scale=1.3,this.leaderboard=this.add.image(300,150,"leaderboard").setInteractive(),this.title=this.add.text(130,0,"The game is over",{fontSize:"32px",fill:"#fff"}),!0===window.model.playerWon?(this.explanation=this.add.text(50,this.game.config.height/2,`You've won the game\n Your score is ${window.model.point}`),this.explanation2=this.add.text(50,this.game.config.height/2+50,`Your time is: ${window.model.clock}`)):(this.explanation=this.add.text(50,this.game.config.height/2,`You've lost the game\n Your score is ${window.model.point}`),this.explanation2=this.add.text(50,this.game.config.height/2+50,`Your time is: ${window.model.clock}`)),this.btnStart=new a.default(this,400,this.game.config.height/2+50,"Re-play","Re-play","","SceneIntro"),this.leaderboard.on("pointerdown",(()=>this.scene.start("SceneLeaderBoard")))}}t.default=d}},0,[[352,216,666,712]]]);
//# sourceMappingURL=index.bundle.js.map